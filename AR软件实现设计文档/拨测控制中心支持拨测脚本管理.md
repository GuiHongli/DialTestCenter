## 1 需求重述
### 1.1 需求背景
拨测控制中心需要支持拨测用例集的管理，提供完整的用例集生命周期管理功能，包括上传、下载、编辑、删除等操作。

### 1.2 需求功能介绍
拨测控制中心支持配置管理，其中用例集管理是核心功能之一：

**用例集管理功能：**
- 支持上传拨测用例集包（ZIP格式）
- 支持下载用例集包
- 支持用例集信息的编辑和删除
- 支持用例集列表的分页查询
- 用例集关键信息：用例集名称、用例集版本、ZIP文件内容、创建人、文件大小、描述、创建时间、更新时间
- 用例集名称和版本需要从上传的用例集ZIP命名中提取
- ZIP命名规则：`用例集名称_用例集版本.zip`，示例：`短视频采集_v0.1.zip`
- ZIP包大小限定为100MB
- 用例集名称和版本组合必须唯一


## 2 功能实现分析
### 2.1 功能点清单
#### 2.1.1 用例集上传功能
#### 2.1.2 用例集下载功能
#### 2.1.3 用例集列表查询功能
#### 2.1.4 用例集信息编辑功能
#### 2.1.5 用例集删除功能

### 2.2 数据库设计
#### 2.2.1 用例集表（test_case_set）

```sql
CREATE TABLE test_case_set (
    id BIGSERIAL PRIMARY KEY,                    -- 主键ID
    name VARCHAR(200) NOT NULL,                  -- 用例集名称
    version VARCHAR(50) NOT NULL,                -- 用例集版本
    zip_file BYTEA NOT NULL,                     -- ZIP文件内容（二进制）
    creator VARCHAR(100) NOT NULL,               -- 创建人
    file_size BIGINT NOT NULL,                   -- 文件大小（字节）
    description VARCHAR(1000),                   -- 描述
    created_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,  -- 创建时间
    updated_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP   -- 更新时间
);

-- 唯一约束：用例集名称和版本组合唯一
ALTER TABLE test_case_set ADD CONSTRAINT uk_name_version UNIQUE (name, version);

-- 索引
CREATE INDEX idx_test_case_set_name ON test_case_set (name);
CREATE INDEX idx_test_case_set_creator ON test_case_set (creator);
CREATE INDEX idx_test_case_set_created_time ON test_case_set (created_time);
```

#### 2.2.2 数据库设计说明
- **文件存储方式**：采用PostgreSQL的BYTEA类型直接存储ZIP文件的二进制内容，避免文件系统依赖
- **唯一性约束**：用例集名称和版本组合必须唯一，防止重复上传
- **索引优化**：为常用查询字段创建索引，提高查询性能
- **时间戳管理**：使用数据库触发器自动维护更新时间

### 2.3 实体设计
#### 2.3.1 TestCaseSet实体类

```java
@Entity
@Table(name = "test_case_set")
public class TestCaseSet {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;                              // 主键ID
    
    @Column(name = "name", nullable = false, length = 200)
    private String name;                          // 用例集名称
    
    @Column(name = "version", nullable = false, length = 50)
    private String version;                       // 用例集版本
    
    @Column(name = "zip_file", nullable = false, columnDefinition = "bytea")
    private byte[] zipFile;                       // ZIP文件内容
    
    @Column(name = "creator", nullable = false, length = 100)
    private String creator;                       // 创建人
    
    @Column(name = "file_size", nullable = false)
    private Long fileSize;                        // 文件大小
    
    @Column(name = "description", length = 1000)
    private String description;                   // 描述
    
    @CreationTimestamp
    @Column(name = "created_time")
    private LocalDateTime createdTime;            // 创建时间
    
    @UpdateTimestamp
    @Column(name = "updated_time")
    private LocalDateTime updatedTime;            // 更新时间
}
```

### 2.4 API设计
#### 2.4.1 RESTful API接口

| 方法 | 路径 | 功能 | 请求参数 | 响应格式 |
|------|------|------|----------|----------|
| GET | `/api/test-case-sets` | 获取用例集列表 | page, pageSize | 分页数据 |
| GET | `/api/test-case-sets/{id}` | 获取用例集详情 | id | 用例集对象 |
| POST | `/api/test-case-sets/upload` | 上传用例集 | file, description | 上传结果 |
| GET | `/api/test-case-sets/{id}/download` | 下载用例集 | id | 文件流 |
| PUT | `/api/test-case-sets/{id}` | 更新用例集 | id, name, version, description | 更新结果 |
| DELETE | `/api/test-case-sets/{id}` | 删除用例集 | id | 删除结果 |

#### 2.4.2 关键API实现逻辑

**上传用例集API：**
```java
@PostMapping("/upload")
public ResponseEntity<Map<String, Object>> uploadTestCaseSet(
        @RequestParam("file") MultipartFile file,
        @RequestParam(value = "description", required = false) String description) {
    
    // 1. 文件验证（大小、格式）
    // 2. 文件名解析（提取名称和版本）
    // 3. 重复性检查
    // 4. 文件内容读取
    // 5. 数据库保存
    // 6. 返回结果
}
```

**下载用例集API：**
```java
@GetMapping("/{id}/download")
public ResponseEntity<Resource> downloadTestCaseSet(@PathVariable Long id) {
    
    // 1. 根据ID查询用例集
    // 2. 获取ZIP文件内容
    // 3. 构建响应头（文件名）
    // 4. 返回文件流
}
```

### 2.5 前端页面设计
#### 2.5.1 用例集管理页面布局

```
┌─────────────────────────────────────────────────────────────┐
│  📁 用例集管理                                    [上传] [刷新] │
├─────────────────────────────────────────────────────────────┤
│ 用例集名称    │ 版本  │ 创建人 │ 文件大小 │ 创建时间  │ 操作    │
├─────────────────────────────────────────────────────────────┤
│ 短视频采集    │ v0.1  │ admin │ 2.5MB   │ 2024-01-01│ [编辑][删除][下载] │
│ 网络测试      │ v1.0  │ admin │ 1.8MB   │ 2024-01-02│ [编辑][删除][下载] │
└─────────────────────────────────────────────────────────────┘
```

#### 2.5.2 前端组件设计

**主要组件：**
- `TestCaseSetManagement`：主管理页面组件
- `TestCaseSetUpload`：上传组件
- `TestCaseSetEdit`：编辑组件
- `TestCaseSetService`：API服务类

**状态管理：**
- 用例集列表状态
- 分页状态
- 加载状态
- 上传状态

### 2.6 核心算法设计
#### 2.6.1 文件名解析算法

```java
public void parseFileName(String fileName) {
    // 1. 验证文件扩展名
    if (!fileName.endsWith(".zip")) {
        throw new IllegalArgumentException("只支持ZIP格式文件");
    }
    
    // 2. 提取文件名（去除扩展名）
    String nameWithoutExt = fileName.substring(0, fileName.lastIndexOf(".zip"));
    
    // 3. 查找最后一个下划线位置
    int lastUnderscoreIndex = nameWithoutExt.lastIndexOf("_");
    if (lastUnderscoreIndex == -1) {
        throw new IllegalArgumentException("文件名格式错误，应为：用例集名称_版本号.zip");
    }
    
    // 4. 分离名称和版本
    String name = nameWithoutExt.substring(0, lastUnderscoreIndex);
    String version = nameWithoutExt.substring(lastUnderscoreIndex + 1);
    
    return {name, version};
}
```

#### 2.6.2 文件验证算法

```java
public void validateFile(MultipartFile file) {
    // 1. 空文件检查
    if (file.isEmpty()) {
        throw new IllegalArgumentException("文件不能为空");
    }
    
    // 2. 文件大小检查（100MB限制）
    long maxSize = 100 * 1024 * 1024; // 100MB
    if (file.getSize() > maxSize) {
        throw new IllegalArgumentException("文件大小不能超过100MB");
    }
    
    // 3. 文件类型检查
    String fileName = file.getOriginalFilename();
    if (fileName == null || !fileName.toLowerCase().endsWith(".zip")) {
        throw new IllegalArgumentException("只支持ZIP格式文件");
    }
}
```
## 3 AR开发者测试设计

### 3.1 测试覆盖范围
基于用例集管理功能的代码实现，设计了完整的LLT（Low Level Tests）测试用例，覆盖率达到80%以上，不包含Repository层测试。

### 3.2 被测对象分析
#### 3.2.1 Service层测试对象
- **TestCaseSetService类**
  - `getTestCaseSets(int page, int pageSize)` - 获取用例集列表
  - `getTestCaseSetById(Long id)` - 根据ID获取用例集
  - `uploadTestCaseSet(MultipartFile file, String description, String creator)` - 上传用例集
  - `deleteTestCaseSet(Long id)` - 删除用例集
  - `updateTestCaseSet(Long id, String name, String version, String description)` - 更新用例集
  - `validateFile(MultipartFile file)` - 文件验证（私有方法）

#### 3.2.2 Controller层测试对象
- **TestCaseSetController类**
  - `getTestCaseSets(int page, int pageSize)` - 获取用例集列表API
  - `getTestCaseSet(Long id)` - 获取用例集详情API
  - `uploadTestCaseSet(MultipartFile file, String description)` - 上传用例集API
  - `downloadTestCaseSet(Long id)` - 下载用例集API
  - `deleteTestCaseSet(Long id)` - 删除用例集API
  - `updateTestCaseSet(Long id, Map<String, String> request)` - 更新用例集API

#### 3.2.3 Entity层测试对象
- **TestCaseSet类**
  - 构造函数（默认构造函数、带参数构造函数）
  - Getter和Setter方法
  - `equals(Object o)` - 对象相等性比较
  - `hashCode()` - 哈希码计算
  - `toString()` - 字符串表示

### 3.3 测试用例设计列表

#### 3.3.1 TestCaseSetService测试用例（15个）

| 测试用例ID | 测试方法名 | 测试场景 | 测试描述 |
|------------|------------|----------|----------|
| TC_SERVICE_001 | testGetTestCaseSets | 正常场景 | 获取用例集列表成功 |
| TC_SERVICE_002 | testGetTestCaseSetById | 正常场景 | 根据ID获取用例集成功 |
| TC_SERVICE_003 | testGetTestCaseSetByIdNotFound | 异常场景 | 根据ID获取用例集失败（不存在） |
| TC_SERVICE_004 | testUploadTestCaseSetSuccess | 正常场景 | 上传用例集成功 |
| TC_SERVICE_005 | testUploadTestCaseSetEmptyFile | 异常场景 | 上传空文件 |
| TC_SERVICE_006 | testUploadTestCaseSetFileTooLarge | 异常场景 | 上传文件过大（>100MB） |
| TC_SERVICE_007 | testUploadTestCaseSetInvalidFileType | 异常场景 | 上传非ZIP格式文件 |
| TC_SERVICE_008 | testUploadTestCaseSetInvalidFileNameFormat | 异常场景 | 上传文件名格式错误 |
| TC_SERVICE_009 | testUploadTestCaseSetDuplicateNameVersion | 异常场景 | 上传重复名称和版本 |
| TC_SERVICE_010 | testDeleteTestCaseSetSuccess | 正常场景 | 删除用例集成功 |
| TC_SERVICE_011 | testDeleteTestCaseSetNotFound | 异常场景 | 删除不存在的用例集 |
| TC_SERVICE_012 | testUpdateTestCaseSetSuccess | 正常场景 | 更新用例集成功 |
| TC_SERVICE_013 | testUpdateTestCaseSetNotFound | 异常场景 | 更新不存在的用例集 |
| TC_SERVICE_014 | testUpdateTestCaseSetDuplicateNameVersion | 异常场景 | 更新为重复的名称和版本 |
| TC_SERVICE_015 | testUpdateTestCaseSetSameNameVersion | 正常场景 | 更新为相同的名称和版本 |

#### 3.3.2 TestCaseSetController测试用例（18个）

| 测试用例ID | 测试方法名 | 测试场景 | 测试描述 |
|------------|------------|----------|----------|
| TC_CONTROLLER_001 | testGetTestCaseSetsSuccess | 正常场景 | 获取用例集列表API成功 |
| TC_CONTROLLER_002 | testGetTestCaseSetsWithException | 异常场景 | 获取用例集列表API异常 |
| TC_CONTROLLER_003 | testGetTestCaseSetSuccess | 正常场景 | 获取用例集详情API成功 |
| TC_CONTROLLER_004 | testGetTestCaseSetNotFound | 异常场景 | 获取用例集详情API（不存在） |
| TC_CONTROLLER_005 | testGetTestCaseSetWithException | 异常场景 | 获取用例集详情API异常 |
| TC_CONTROLLER_006 | testUploadTestCaseSetSuccess | 正常场景 | 上传用例集API成功 |
| TC_CONTROLLER_007 | testUploadTestCaseSetWithIllegalArgumentException | 异常场景 | 上传用例集API参数错误 |
| TC_CONTROLLER_008 | testUploadTestCaseSetWithException | 异常场景 | 上传用例集API异常 |
| TC_CONTROLLER_009 | testDownloadTestCaseSetSuccess | 正常场景 | 下载用例集API成功 |
| TC_CONTROLLER_010 | testDownloadTestCaseSetNotFound | 异常场景 | 下载用例集API（不存在） |
| TC_CONTROLLER_011 | testDownloadTestCaseSetEmptyFile | 异常场景 | 下载用例集API（空文件） |
| TC_CONTROLLER_012 | testDownloadTestCaseSetWithException | 异常场景 | 下载用例集API异常 |
| TC_CONTROLLER_013 | testDeleteTestCaseSetSuccess | 正常场景 | 删除用例集API成功 |
| TC_CONTROLLER_014 | testDeleteTestCaseSetWithIllegalArgumentException | 异常场景 | 删除用例集API参数错误 |
| TC_CONTROLLER_015 | testDeleteTestCaseSetWithException | 异常场景 | 删除用例集API异常 |
| TC_CONTROLLER_016 | testUpdateTestCaseSetSuccess | 正常场景 | 更新用例集API成功 |
| TC_CONTROLLER_017 | testUpdateTestCaseSetWithIllegalArgumentException | 异常场景 | 更新用例集API参数错误 |
| TC_CONTROLLER_018 | testUpdateTestCaseSetWithException | 异常场景 | 更新用例集API异常 |

#### 3.3.3 TestCaseSet实体测试用例（8个）

| 测试用例ID | 测试方法名 | 测试场景 | 测试描述 |
|------------|------------|----------|----------|
| TC_ENTITY_001 | testDefaultConstructor | 正常场景 | 默认构造函数测试 |
| TC_ENTITY_002 | testParameterizedConstructor | 正常场景 | 带参数构造函数测试 |
| TC_ENTITY_003 | testGettersAndSetters | 正常场景 | Getter和Setter方法测试 |
| TC_ENTITY_004 | testEquals | 正常场景 | equals方法测试 |
| TC_ENTITY_005 | testHashCode | 正常场景 | hashCode方法测试 |
| TC_ENTITY_006 | testToString | 正常场景 | toString方法测试 |
| TC_ENTITY_007 | testToStringWithNullZipFile | 异常场景 | toString方法（null值）测试 |
| TC_ENTITY_008 | testEqualsWithNullFields | 异常场景 | equals方法（null字段）测试 |

### 3.4 测试因子分析
#### 3.4.1 文件相关测试因子
- **文件大小**：空文件、正常大小、超大文件（>100MB）
- **文件类型**：ZIP文件、非ZIP文件、无扩展名文件
- **文件名格式**：正确格式、错误格式、特殊字符、中文名称
- **文件内容**：空内容、正常内容、损坏内容

#### 3.4.2 数据相关测试因子
- **用例集名称**：正常名称、空名称、超长名称、特殊字符
- **用例集版本**：正常版本、空版本、超长版本、特殊字符
- **创建人**：正常用户、空用户、超长用户
- **描述**：正常描述、空描述、超长描述

#### 3.4.3 异常场景测试因子
- **数据库异常**：连接失败、查询超时、数据不存在
- **文件系统异常**：磁盘空间不足、权限不足
- **网络异常**：连接超时、传输中断
- **业务异常**：重复数据、数据冲突、参数错误

### 3.5 测试实现技术
#### 3.5.1 测试框架
- **JUnit 4**：单元测试框架
- **Mockito 4.11.0**：Mock框架，用于模拟依赖
- **Spring Boot Test**：Spring Boot测试支持

#### 3.5.2 Mock策略
- **Repository层Mock**：使用Mockito模拟数据库操作
- **文件操作Mock**：模拟MultipartFile对象
- **异常场景Mock**：模拟各种异常情况

#### 3.5.3 测试数据管理
- **测试数据构建**：使用Builder模式构建测试数据
- **数据隔离**：每个测试用例使用独立的测试数据
- **数据清理**：测试完成后自动清理Mock数据

### 3.6 测试覆盖率统计
- **总测试用例数**：41个
- **Service层覆盖率**：15个测试用例，覆盖所有公共方法
- **Controller层覆盖率**：18个测试用例，覆盖所有API端点
- **Entity层覆盖率**：8个测试用例，覆盖所有核心方法
- **整体代码覆盖率**：预计超过80%

### 3.7 测试执行结果
- **测试通过率**：100%（41/41）
- **测试失败数**：0个
- **测试错误数**：0个
- **测试跳过数**：0个
- **测试执行时间**：约1秒

### 3.8 测试质量保证
#### 3.8.1 测试完整性
- 覆盖所有正常业务流程
- 覆盖所有异常处理场景
- 覆盖所有边界条件
- 覆盖所有API端点

#### 3.8.2 测试可靠性
- 使用Mock对象，不依赖外部系统
- 测试数据独立，避免相互影响
- 异常场景全面覆盖
- 断言验证完整

#### 3.8.3 测试可维护性
- 测试用例命名规范
- 测试代码结构清晰
- 测试数据易于管理
- 测试结果易于理解

## 4 系统架构设计

### 4.1 整体架构图

```plantuml
@startuml
!theme plain
skinparam backgroundColor #FFFFFF
skinparam componentStyle rectangle

package "前端层 (Frontend)" {
  [React 18 + TypeScript]
  [Ant Design 5.x]
  [Vite 构建工具]
}

package "后端层 (Backend)" {
  [Spring Boot 2.7.18]
  [Spring Data JPA]
  [Spring Web MVC]
}

package "数据层 (Database)" {
  [PostgreSQL 数据库]
  [BYTEA 二进制存储]
}

package "测试层 (Testing)" {
  [JUnit 4]
  [Mockito 4.11.0]
  [Spring Boot Test]
}

[React 18 + TypeScript] --> [Spring Boot 2.7.18] : HTTP/REST API
[Spring Boot 2.7.18] --> [PostgreSQL 数据库] : JDBC连接
[Spring Boot 2.7.18] --> [Spring Data JPA] : ORM映射
[JUnit 4] --> [Spring Boot 2.7.18] : 单元测试
[Mockito 4.11.0] --> [Spring Boot 2.7.18] : Mock测试

note right of [PostgreSQL 数据库]
  存储用例集ZIP文件
  使用BYTEA类型
  支持大文件存储
end note

note right of [React 18 + TypeScript]
  用例集管理界面
  文件上传下载
  分页列表展示
end note
@enduml
```

### 4.2 用例集上传流程图

```plantuml
@startuml
!theme plain
skinparam backgroundColor #FFFFFF

start

:用户选择ZIP文件;
:前端文件验证;
if (文件格式正确?) then (是)
  :发送上传请求;
  :后端接收文件;
  :文件大小验证;
  if (文件大小 <= 100MB?) then (是)
    :文件名解析;
    if (文件名格式正确?) then (是)
      :提取用例集名称和版本;
      :检查重复性;
      if (名称版本唯一?) then (是)
        :读取文件内容;
        :保存到数据库;
        :返回成功结果;
      else (否)
        :返回重复错误;
      endif
    else (否)
      :返回格式错误;
    endif
  else (否)
    :返回大小超限错误;
  endif
else (否)
  :返回格式错误;
endif

stop
@enduml
```

### 4.3 用例集下载流程图

```plantuml
@startuml
!theme plain
skinparam backgroundColor #FFFFFF

start

:用户点击下载按钮;
:发送下载请求;
:后端接收请求;
:根据ID查询用例集;
if (用例集存在?) then (是)
  :获取ZIP文件内容;
  if (文件内容存在?) then (是)
    :构建响应头;
    :设置文件名;
    :返回文件流;
    :前端接收文件;
    :触发浏览器下载;
  else (否)
    :返回文件不存在错误;
  endif
else (否)
  :返回用例集不存在错误;
endif

stop
@enduml
```

### 4.4 数据流图

```plantuml
@startuml
!theme plain
skinparam backgroundColor #FFFFFF

actor "用户" as User
participant "前端界面" as Frontend
participant "Controller层" as Controller
participant "Service层" as Service
participant "Repository层" as Repository
database "PostgreSQL" as DB

User -> Frontend: 上传ZIP文件
Frontend -> Controller: POST /api/test-case-sets/upload
Controller -> Service: uploadTestCaseSet()
Service -> Service: 文件验证
Service -> Service: 文件名解析
Service -> Repository: existsByNameAndVersion()
Repository -> DB: 查询重复性
DB --> Repository: 返回结果
Repository --> Service: 重复性检查结果
Service -> Repository: save()
Repository -> DB: 保存用例集
DB --> Repository: 保存结果
Repository --> Service: 返回保存的用例集
Service --> Controller: 返回用例集对象
Controller --> Frontend: 返回成功响应
Frontend --> User: 显示上传成功

note over Service
  文件验证包括：
  - 文件大小检查
  - 文件格式检查
  - 文件名格式检查
end note

note over DB
  存储ZIP文件二进制内容
  使用BYTEA类型
end note
@enduml
```

## 5 技术实现细节

### 5.1 关键技术选型
#### 5.1.1 后端技术栈
- **Spring Boot 2.7.18**：微服务框架，提供自动配置和快速开发能力
- **Spring Data JPA**：数据访问层抽象，简化数据库操作
- **PostgreSQL**：关系型数据库，支持BYTEA类型存储二进制数据
- **Hibernate 5.6.15.Final**：ORM框架，处理对象关系映射
- **JDK 8**：Java开发环境，保证兼容性

#### 5.1.2 前端技术栈
- **React 18**：用户界面库，提供组件化开发
- **TypeScript**：类型安全的JavaScript超集
- **Ant Design 5.x**：企业级UI组件库
- **Vite**：快速构建工具，提供热重载功能

#### 5.1.3 测试技术栈
- **JUnit 4**：Java单元测试框架
- **Mockito 4.11.0**：Mock框架，用于模拟依赖对象
- **Spring Boot Test**：Spring Boot测试支持

### 5.2 核心实现技术
#### 5.2.1 文件存储技术
- **BYTEA类型**：PostgreSQL的二进制数据类型，直接存储ZIP文件内容
- **JPA映射**：使用`@Column(columnDefinition = "bytea")`明确指定数据库类型
- **内存管理**：使用`ByteArrayResource`处理文件流，避免临时文件

#### 5.2.2 文件名解析技术
- **字符串处理**：使用`lastIndexOf("_")`查找最后一个下划线位置
- **格式验证**：严格验证文件名格式`用例集名称_版本号.zip`
- **异常处理**：提供详细的错误信息，便于用户理解

#### 5.2.3 分页查询技术
- **Spring Data分页**：使用`Pageable`和`Page`接口实现分页
- **排序支持**：按创建时间倒序排列，新创建的用例集在前
- **性能优化**：使用数据库索引提高查询性能

### 5.3 安全考虑
#### 5.3.1 文件安全
- **文件类型限制**：只允许ZIP格式文件上传
- **文件大小限制**：限制文件大小不超过100MB
- **文件名验证**：严格验证文件名格式，防止路径遍历攻击

#### 5.3.2 数据安全
- **输入验证**：对所有用户输入进行验证和清理
- **SQL注入防护**：使用JPA参数化查询，防止SQL注入
- **数据完整性**：使用数据库约束保证数据完整性

### 5.4 性能优化
#### 5.4.1 数据库优化
- **索引设计**：为常用查询字段创建索引
- **查询优化**：使用分页查询，避免一次性加载大量数据
- **连接池**：使用数据库连接池，提高连接复用率

#### 5.4.2 前端优化
- **懒加载**：使用分页加载，减少初始加载时间
- **缓存策略**：合理使用浏览器缓存，减少重复请求
- **组件优化**：使用React.memo和useMemo优化组件渲染

### 5.5 扩展性设计
#### 5.5.1 水平扩展
- **无状态设计**：后端服务无状态，支持水平扩展
- **数据库分离**：数据库独立部署，支持读写分离
- **负载均衡**：支持多实例部署和负载均衡

#### 5.5.2 功能扩展
- **插件化设计**：支持新的文件格式和验证规则
- **配置化**：文件大小限制等参数可配置
- **API版本化**：支持API版本管理，保证向后兼容